# Network
NetRiders 2019 본선 공부 겸 네트워크 공부 내용을 정리해 놓습니다.

목차는 다음과 같습니다.

[1. 네트워크 장비](##-1.-네트워크-장비)

[2. OSI 참조 모델](##2.-OSI-참조-모델)

[부록. 용어사전](##부록.-용어사전)

## 1. 네트워크 장비

[케이블](###케이블)

[라우터와 모듈](###라우터와-모듈)

### 케이블
* 콘솔: 콘솔 케이블은 PC와 라우터 간 또는 PC와 스위치 간의 콘솔 연결을 위해서 사용됨. 콘솔 연결을 구성하기 위해서는 반드시 데이터 비트가 7 또는 8비트이어야 하며, 패리티 값이 같아야 하며, 정지 비트 값도 1 또는 2를 가져야 함.

* 다이렉트: 이 케이블은 이더넷 표준으로써 OSI 계층에서 동작하는 서로 다른 계층의 장치를 연결할 때 사용함. 연결되는 장치의 포트에 따라 Ethernet, Faster Ethernet, Gigabit Ethernet로 연결할 수 있음.

* 크로스: 이 케이블은 이더넷 표준으로써 OSI 계층에서 동작하는 서로 다른 계층의 장치를 연결할 때 사용하며, 연결되는 장치의 포트에 따라 Ethernet, Faster Ethernet, Gigabit Ethernet로 연결할 수 있음.

* 광케이블: 장치 간의 광 포트 연결 시 사용.(100Mbps or 1Gbps)

* 전화선: 전화선 연결은 특정 장치와 모뎀을 연결할 때 사용. PC가 전화 접속 네트워크를 사용하여 네트워크에 접속할 때도 사용됨.

* 동축선: 네트워크에 케이블 모뎀을 사용하여 연결 시 사용되는 회선. 장치의 동축 케이블 포트와 연결 시에도 사용.

* 시리얼 DCE 및 DTE: 시리얼 연결은 WAN 구간에서 WAN 포트를 사용하여 연결됨. 반드시 Clock Rate를 DCE 구간에 적용해야 함. 사용자가 시리얼 연결을 위해 DCE를 선택하면, 연결되는 다른 구간은 자동으로 DTE가 됨.

* 옥탈: 8개의 포트를 가지는 비동기 인터페이스와 RJ-45를 이용하는 다른 장치와 연결될 때 사용되는 케이블. 주로 장치의 콘솔들이 연결되며 Remote Access Server를 라우터에 구축하는 경우에 사용.

### 라우터와 모듈
후에 정리하겠음.

## 2. OSI 참조 모델

컴퓨터 네트워크를 구성하는 네트워킹 장치들이 데이터를 어떻게 주고받는지에 대해 이해하기 위해서 OSI 참조모델이 기본적임.

OSI 참조 모델은 또한 컴퓨터 네트워크를 설계하거나 네트워크 프로토콜을 설계하기 위한 지침으로 이용됨.

OSI 참조 모델은 아래 그림과 같이 7개 계층으로 나뉘어지며, 각 계층별로 고유한 기능을 가짐.

7계층은 하위 계층부터 최상위 계층까지 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층 순서임.

### 물리 계층

물리계층은 사용자 데이터를 물리 매체상에서 소통이 가능한 통신 신호로 변환하여 전송하는 역할을 함.
신호 전송을 위한 링크의 설정과 유지 그리고 전기적, 기능적, 절차적, 물리적 특성들을 포함함.

* 전기적 특성: 전압 레벨과 전압이 변하게 되는 시점과 관련된 특성

* 기능적 특성: 매체를 통해 물리적으로 연결된 장치 간에 데이터를 주고받을 때 사용되는 케이블의 기능적 특성을 정의.

* 절차적 특성: 데이터를 성공적으로 전송하기 위한 절차 규정.

* 물리적 특성: 케이블 간의 물리적 연결 정의

물리 계층은 사용자 데이터를 통신 링크상에 전송할 수 있는 형태로 변환하기 때문에 양극형, 극형과 같이 신호의 종류를 결정하고, 0과 1을 표현하는 신호의 시스템에 대해서 정의하는 등 장치간의 물리적 연결과 관련된 모든 사항을 정의하는 계층임.

물리 계층에서 송수신간 오류가 발생했을 때, 이러한 오류는 물리 계층에서 처리하지 않고 상위 계층에서 처리하게 됨.

물리 계층은 데이터를 규정된 신호로 변환 또는 변조 후 신호를 케이블을 통해 전달. 구리선을 이용한 매체가 전도율이 우수하고, 부식에 대한 특성이 좋고, 유연성이 뛰어남. 강도 또한 좋기에 널리 사용됨.

구리선을 이용한 대표적인 통신 매체는 UTP 케이블로, 로컬 네트워크 구현 시 가장 많이 사용됨. 서로 쌍으로 꼬인 구리선이 몇 가지 다른색의 보호 절연체로 감싸져 있는 매체로, 이 UTP 케이블을 매체간 연결을 할 수 있는 커넥터가 RJ-45 커넥터임.

UTP 케이블은 케이블의 크기가 기존의 다른 구리 매체에 비해서 작고 제작 및 설치가 매우 쉬운 장점이 있지만 전기적 잡음과 간섭에 민감하다는 단점이 있음.

### 데이터링크 계층

데이터링크 계층은 직접 연결된 서로 다른 2개의 네트워킹 장치 간의 데이터 전송을 담당하는 게층.

데이터링크 계층에서 전송되는 데이터를 일반적으로 프레임이라고 함.

이 계층에서 사용되는 프로토콜들은 용도에 따라 프레임의 종류, 길이 등의 정보를 정의하고 일반적으로는 MAC이라고 하는 매체 접근 제어 기능과 48비트의 주소 및 물리 계층에서 전송되는 비트 스트림의 경계를 구분하기 위한 프레임 데이터 동기 정보 그리고 각각의 신호 비트들을 식별하는 기능 등을 사용하여 프레임을 전송함.

스위치와 브리지가 Layer 2의 대표적인 장치였는데, 브리지는 스위치에 통합되어 거의 사용하지 않음.

스위치는 프레임을 효율적으로 전송하기 위해 MAC 테이블을 미리 만들어놓고 이를 참조하여 프레임을 전송함.

|Address|Port|
|---|---|
|MAC 주소|장치 Port|

데이터링크 계층에서 데이터 전송을 위해 사용하는 MAC 주소는 물리주소 또는 하드웨어 주소라고 하며, 이 주소는 장치를 만들 때 장치 내의 ROM에 영구적으로 기입되어 나옴. 구워진 주소라고도 함.

데이터링크 계층의 주 역할은 다음과 같음

* 프레이밍: 물리 계층을 통해 수신한 신호를 조합하여 프레임 단위의 정해진 크기의 데이터 유닛으로 만들어 처리함. 또는 그 역으로 네트워크 계층으로부터 내려온 데이터를 프레임 단위의 정해진 크기의 데이터유닛으로 만든 후 신호로 전송.

* 흐름 제어: 송신 측과 수신 측 간에 데이터를 주고받을 때, 너무 많거나 너무 적게 데이터를 송수신하지 않도록 데이터 흐름을 적절히 제어함.

* 오류 제어: 프레임 전송 시에 발생한 오류를 복원하거나 재전송. 비동기 통신에서는 오류를 검출만 하나 동기 통신에서는 오류 검출 및 정정 기능을 제공.

* 접근 제어: 매체상에 주체가 여럿 존재할 때, 매체와 통신 장치의 활동 상황을 고려하여 데이터를 전송할 수 있는지 없는지 결정.

* 동기화: 프레임 헤더에는 사용되는 데이터링크 계층 프로토콜에 따라 프레임의 구분자나 전송된 프레임의 타이밍 정보를 맞추기 위해 필요한 특별한 비트패턴을 제공하고 있음.

위의 기능들을 수행하기 위해 데이터링크 계층에서는 헤더와 트레일러를 사용함. 헤더에는 송수신장치의 주소가, 트레일러에는 오류 검출을 위한 오류 검출 코드가 들어감.

### 네트워크 계층

네트워크 계층에서는 사용자 데이터를 전달하기 위하여 논리적 통신 채널을 통해 상위 계층으로부터 받은 데이터를 패킷(데이터그램)이라 불리는 단위로 규격화하여 전송하고 수신하는 기능을 수행함.

데이터링크 계층에서 MAC 주소를 기반으로 프렝미이라는 데이터를 송수신한다면, 네트워크 계층에서는 IP 주소를 기반으로 패킷이라는 데이터를 송수신하는데 이 패킷을 송수신하기 위해 사용하는 장치가 라우터나 스위치임.

스위치는 L2, L3, L4, L7 스위치로 나뉨.

* L2 스위치: 프레임 기반의 데이터를 전송하기 위해 사용.

* L3 스위치: IP 기반의 패킷을 전송하기 위해 사용.

* L4 스위치: L2와 L3 스위치의 경로를 제어, L4에서 발생하는 세션 관리 및 세션 관리를 위한 패킷 필터링과 미러링을 수행. 로드 밸런싱 기능을 통해 로드율 증가, 부하량, 속도 저하를 고려하여 적절히 트래픽을 분산시킴.

* L7 스위치: 패킷 관리까지 수행할 수 있는 스위치로, L2와 L3 스위치의 경로를 제어, 로드 밸런싱, 내부 망에서 외부 인터넷으로 향하는 웹 트래픽 또는 특정 프로토콜의 패킷을 가로채 캐싱 서버에서 전달하는 캐시 리다이렉션을 통해 효율적인 네트워크 구성이 가능함. 그리고 다수의 방화벽 구성으로 가용성을 향상하고 동적인 로드 밸런싱을 통해 효율적인 네트워크 구성이 가능하며, 시스템 변경 없이 방화벽 확장 및 관리가 용이함.

네트워크 계층은 장치 내의 IP 테이블과 같은 정보를 이용하여 스위칭과 라우팅 기능을 통해 패킷 경로를 결정함.

|Address|Port|
|---|---|
|IP 주소| 장치 Port|

스위칭은 L3 스위치 에서 패킷을 전송하기 위해 물리적인 링크들을 임시적으로 연결하는 방식임. 스위치는 패킷의 수신 주소를 보고 바로 패킷을 전달하리 때문에 라우터보다 좀 더 빠르게 전달할 수 있음.

라우팅은 라우터를 이용해 패킷을 전송하는 방법으로 패킷을 보내기 위해 가장 효율적인 경로를 선택하는 기능을 가지고 있지만, 어떠한 라우팅 프로토콜을 사용하는지에 따라 기능 지원 여부가 갈림.

라우터가 패킷을 수신하면 어떠한 경로로 이 패킷을 전송하는 것이 제일 효율적인지를 현재 운용중인 라우팅 프로토콜에 따라 판단하게 되고, 이 프로토콜에 의해 결정된 경로로 해당 패킷을 전송함.

네트워크 계층의 주요 역할은 다음과 같음.

* 패킷 전달: 종단 간의 패킷 전달을 수행함.

* 라우팅: 종단 간 패킷을 전송할 때, 라우팅 프로토콜을 기반으로 가장 효율적인 경로를 선택하여 패킷을 전송할 수 있게 함.

* 논리적인 주소 사용: IP 주소를 사용하여 사용자 데이터를 목적지 장치까지 전달. 전송 계층으로 부터 받은 데이터에 송수신 장치의 IP 주소들을 포함하는 IP 프로토콜 헤더를 붙여 캡슐화를 수행한 후 패킷을 전송.

### 전송 계층

전송 계층은 통신 세션을 설정하고 있는 송수신 장치 간의 사용자 데이터 전송을 위한 종단 간 통신을 제어함. 세그먼트라는 이름을 가진 정해진 크기의 데이터 유닛을 처리함.

데이터를 전송하는 것에 관한 하위 3개의 계층과는 달리 전송 계층부터 응용 계층은 사용자가 사용하게되는 서비스와 직접적으로 관련된 역할을 수행함.

전송 계층에 세그먼트 헤더에는 포트 주소 또는 소켓 주소가 포함되게 됨. 즉 전송계층은 소프트웨어적인 특성을 가지는 상위 3개 계층과 하드웨어적 특성을 가지는 하위 3개 계층 사이에서 중간적인 특성을 가지고 있는 계층임.

전송 계층의 주요 역할은 다음과 같음.

* 종단 간 데이터 통신 보장: 종단 간 데이터 전송에 필요한 통신 채널을 통해 흐름 제어 및 오류 제어 등을 수행하여 전체적인 사용자 데이터의 통신을 보장.

* 지연에 따른 왜곡 및 대역폭 부족 문제 해결

* 동시에 여러 개의 논리적 연결을 지원

* 사용자 데이터 분할과 재조립: 사용자 데이터를 전송이 가능한 고정된 크기의 데이터 유닛으로 분할하여 순서 번호를 할당하며 수신한 데이터는 이 번호를 참조하여 재조립하거나 폐기하는 역할을 수행.


### 세션 계층

세션 계층은 종단 간에 통신 세션의 시작과 종료를 정의함.

세션 계층을 포함한 상위 계층에서 다루는 데이터를 메시지라고 부름. 세션 계층은 전송 시 동기 점을 삽입함으로써 메시지를 그룹화하며, 전이중 전송이나 반이중 선송과 같은 데이터 전송 방향을 결정하고, 데이터에 대한 중간 점검 및 복구를 위한 동기 점을 생성함.

> 표현 계층 데이터 + 동기화, 세션 정보 = 5계층 정보

### 표현 계층

표현 계층은 데이터를 어떻게 표현하는지를 정의하는 계층임.

응용 계층에서 생성된 데이터는 컴퓨터에서 만들어진 데이터이고, 이 데이터를 다른 모든 컴퓨터가 이해할 수 있는 형태로 변환하는 것이 표현 계층의 역할임. 따라서 송수신 장치 간에 데이터를 변환하는 역할을 수행하며, 암호화를 통해 데이터의 보안성을 높이고, 데이터 압축 기능을 지원하여 데이터가 효율적으로 송수신될 수 있도록 하고있음.

ASCII, EBCDIC, Binary, ASN.1을 포함한 다양한 데이터 표현 기술이 이 계층에서 사용될 수 있음.

### 응용 계층

응용 계층은 응용 프로그램과 통신 프로그램 사이를 연결하는 인터페이스를 제공하는 OSI의 최상위 계층임. 데이터의 형식을 정의하고, 암호화하고, 압축하며, 부호화하는 상위 계층들의 기능을 포괄적으로 의미하기도 함.

FTP, SMTP, SNMP, HTTP, HTTPS, TELNET, SSH 등이 응용 계층의 예이며, 통신 권한을 설정할 수 있고, 통신 절차의 시작과 종료를 포함하는 대화 방법을 선택할 수 있는 등의 기능을 가지고 있음.

## 부록.용어사전
* ICMP Ping: 에코 요청과 에코 응답으로 구성되어 장치 간의 통신 상태를 테스트하기 위해 사용됨. 학교에서 출석을 부를 때 학생이 대답하는 것을 예로 들면, 출석을 부르는 것이 에코 요청, 이에 대답하는 것이 에코 응답.
응답이 오지 않는다고 통신이 안되는 것은 아니고, 방화벽 등 다양한 원인으로 장치는 정상적으로 동작하지만 에코 응답이 오지 않는 경우가 있음.
* IP Adddress: 네트워킹 장치에 할당된 32비트의 고유주소. 128비트 길이의 IPv6 주소도 있음.
* Ethernet: 로컬 LAN상에서 2계층 하드웨어 통신을 위한 보편화된 LAN 표준.
* Fast Etnernet: 100Mbps의 속도를 가지는 고속 Ethernet 또는 포트를 의미.
* OSI Model: 개방형 시스템 간의 상호 접속 모델로서 7개의 계층으로 정의됨.
* PDU: 프로토콜 데이터 유닛의 약자로 OSI 모델의 특정 계층에서 사용하는 고정된 크기의 데이터 단위를 의미.
* Packet: OSI 모델의 3계층에서 사용하는 PDU를 의미. 광의의 의미로 계층에 관계없이 임의의 프로토콜에 의해 정의된 PDU(세그먼트, 데이터그램, 프레임)를 일컫기도 함.
* Device Table: ARP, 스위칭, 라우팅 테이블을 포함. 네트워킹 장치와 프로토콜에 관한 정보를 가지고 있음.
* ARP Table: 주소 해결 프로토콜(Address Resolution Protocol)에 의해 생성되는 테이블로, Ethernet의 MAC 주소와 이와 연관되어 있는 IP 주소를 나타내는 테이블.
